<?xml version="1.0" encoding="UTF-8"?>

<packages>

<!--
  NOTES
  1) We install to %SYSTEMDRIVE%\Ruby and set path and file associations - no transforms for Inno Setup, so we have to pick defaults
-->

<package
  id="ruby_19"
  name="Ruby 1.9.2"
  revision="%version%-%patch%-0"
  reboot="false">

  <variable name="version" value="1.9.2" />
  <variable name="patch" value="290" />
  <variable name="flags" value='/verysilent /dir="%SYSTEMDRIVE%\Ruby\%version%" /tasks="assocfiles,modpath"' />

  <check type="uninstall" condition="exists" path="Ruby %version%-p%patch%" />

  <install   cmd='"%SOFTWARE%\Ruby\rubyinstaller-%version%-p%patch%.exe" %flags%' />
  <upgrade   cmd='"%SOFTWARE%\Ruby\rubyinstaller-%version%-p%patch%.exe" %flags%' />
  <downgrade cmd='"%SOFTWARE%\Ruby\rubyinstaller-%version%-p%patch%.exe" %flags%' />

  <remove    cmd='"%SYSTEMDRIVE%\Ruby\%version%\unins000.exe" /VERYSILENT' />

</package>

<package
  id="jruby"
  name="JRuby"
  revision="%version%-0"
  reboot="false">

  <depends package-id="java" />

  <variable name="version" value="1.6.5" />
  <variable name="fileversion" value="1_6_5" />
  <variable name="PKG_SOURCE" value="%SOFTWARE%\Ruby\jruby_windows_1_6_5.exe"     architecture="x86" />
  <variable name="PKG_SOURCE" value="%SOFTWARE%\Ruby\jruby_windows_x64_1_6_5.exe" architecture="x64" />

  <check type="uninstall" condition="exists" path="JRuby %version%" />

  <install   cmd='"%PKG_SOURCE%" -q' />
  <upgrade   cmd='"%PKG_SOURCE%" -q' />
  <downgrade cmd='"%PKG_SOURCE%" -q' />
  <remove    cmd='"%SYSTEMDRIVE%\jruby-%fileversion%\uninstall.exe" -q' />

</package>

</packages>
