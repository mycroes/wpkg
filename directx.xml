<?xml version="1.0" encoding="UTF-8"?>

<!--
  NOTES
  1) This doesn't work - both packages error out with -9 on silent install
-->

<packages>

<package
  id="directx"
  name="DirectX 9.0c"
  revision="10"
  priority="50">

  <check type="file" condition="versiongreaterorequal" path="%WINDIR%\system32\x3daudio1_7.dll" value="9.28.1886.0"/>

  <depends package-id="directx_web" />
</package>

<package
  id="directx_web"
  name="Directx 9.0c"
  revision="4"
  priority="50">

  <install cmd='"%SOFTWARE%\DirectX\DXwebSetup.exe" /c:"DXwSetup.exe /windowsupdate" /q /r:n' >
    <exit code="0" />
    <exit code="3010" reboot="postponed" />
  </install>

  <upgrade cmd='"%SOFTWARE%\DirectX\DXwebSetup.exe" /c:"DXwSetup.exe /windowsupdate" /q /r:n' >
    <exit code="0" />
    <exit code="3010" reboot="postponed" />
  </upgrade>

  <remove cmd="echo null" />
</package>

<package
  id="directx_redist"
  name="DirectX 9.0c"
  revision="4"
  priority="50">

  <install cmd='%COMSPEC% /c IF EXIST "%TEMP%\dx" RD /Q /S "%TEMP%\dx"' />
  <install cmd='"%SOFTWARE%\DirectX\directx_Jun2010_redist.exe" /Q:a /C /T:"%TEMP%\dx"' />
  <install cmd='%COMSPEC% /c pushd "%TEMP%\dx"' />
  <install cmd='"%TEMP%\dx\dxsetup.exe" /SILENT'>
    <exit code="0" />
    <exit code="3010" reboot="postponed" />
  </install>
  <install cmd='%COMSPEC% /c popd' />
  <install cmd='%COMSPEC% /c IF EXIST "%TEMP%\dx" RD /Q /S "%TEMP%\dx"' />

  <upgrade cmd='%COMSPEC% /c IF EXIST "%TEMP%\dx" RD /Q /S "%TEMP%\dx"' />
  <upgrade cmd='"%SOFTWARE%\DirectX\directx_Jun2010_redist.exe" /Q /C /T:"%TEMP%\dx"' />
  <upgrade cmd='"%TEMP%\dx\dxsetup.exe" /SILENT'>
    <exit code="0" />
    <exit code="3010" reboot="postponed" />
  </upgrade>
  <upgrade cmd='%COMSPEC% /c IF EXIST "%TEMP%\dx" RD /Q /S "%TEMP%\dx"' />

  <remove cmd="echo null" />

</package>

</packages>
